<div class="slds-card via-slds-card--active slds-m-bottom--small" data-card="{{uniqueLayoutId}}-card-{{cardIndex}}" ng-class="{selected:isSelected(cardIndex)}"  data-popover-flyout="true" ng-controller="anthemCommisionCardController">
    <div class="via-slds-card__header slds-card__header slds-grid slds-grid--vertical-align-center slds-p-around--small header-{{getHeaderColor(obj)}}">
      <div class="slds-media slds-media--center slds-has-flexi-truncate">
        <div class="slds-media__figure">
            <!--<vloc-card-icon data="data" obj="obj" size="'medium'"></vloc-card-icon>-->
          <div ng-show="{{getIconBasedOnRole(obj, 'RVP')}}">
             <span class="slds-icon_container slds-icon-standard-campaign">
                
              </span>
          </div>
          <div ng-show="{{getIconBasedOnRole(obj, 'Account Manager')}}">
             <span class="slds-icon_container slds-icon-standard-drafts">
               
              </span>
          </div>
          <div ng-show="{{getIconBasedOnRole(obj, 'Regional Manager')}}">
            <span class="slds-icon_container slds-icon-standard-drafts">
                
              </span>
          </div>
          <div ng-show="{{getIconBasedOnRole(obj, 'Chief Client Officer')}}">
             <span class="slds-icon_container slds-icon-standard-drafts">
               
              </span>
          </div>
          <div ng-show="{{getIconBasedOnRole(obj, 'Director/Sales AM')}}">
             <span class="slds-icon_container slds-icon-standard-drafts">
                
              </span>
          </div>
          <div ng-show="{{getIconBasedOnRole(obj, 'Account Executive')}}">
             <span class="slds-icon_container slds-icon-standard-drafts">
                
              </span>
          </div>
         </div>
        <div class="slds-media__body slds-truncate">
          <a ng-href="/one/one.app#/sObject/{{obj.Id}}/view" ng-data-url="/one/one.app#/sObject/{{obj.Id}}/view" class="slds-text-link--reset" tooltip-placement="bottom" tooltip="{{data.title}}" target="_parent">
            <span class="slds-text-heading--medium" title="{{obj | getter:data.fields[0]}}"><strong>{{obj | getter:data.fields[0] | picker:data.fields[0].type}}</strong></span>
              <br />
              <span class="slds-text-heading--small" title="{{obj | getter:data.fields[1]}}">{{obj | getter:data.fields[1] | picker:data.fields[1].type}}</span> 
          </a>
        </div>
      </div>
      <div class="slds-no-flex" ng-init="overflowActions = data.actions.slice(data.limitActionLinksTo?data.limitActionLinksTo:5)">
          <slds-dropdown content="overflowActions" ng-if="overflowActions.length > 0" icon-attribute="vlocityIcon" label-attribute="displayName" action-function="performAction(item)" button-size="medium"></slds-dropdown>
      </div>
    </div>
    <div class="slds-card__body via-slds-card__body slds-grid slds-wrap slds-theme--default slds-p-around--medium">
        <div class="slds-col--padded slds-size--1-of-1">
           <div class="slds-tile slds-p-bottom--medium" ng-repeat="field in data.fields.slice(2, 5) " ng-show="key != 'attributes'">
              <p class="slds-truncate slds-text-heading--label" title="{{field.label}}">{{field.label}}</p>
              <div class="slds-tile__detail slds-text-heading--small ">
                  <p class="slds-truncate" title="{{obj | getter: field | picker: field.type}}">{{obj | getter: field | picker: field.type}}</p>
              </div>
          </div>
          <div class="slds-tile slds-p-bottom--medium" ng-show="{{getIconBasedOnRecordType(obj, 'Renewal')}}">
              <p class="slds-truncate slds-text-heading--label" title="{{data.fields[5].label}}">{{data.fields[5].label}}</p>
              <div class="slds-tile__detail slds-text-heading--small ">
                  <p class="slds-truncate" title="{{obj | getter: data.fields[5]}}">{{obj |  getter: data.fields[5]}}</p>
              </div>
          </div>
          <div class="slds-tile slds-p-bottom--medium" ng-show="{{getIconBasedOnRecordType(obj, 'In Group Change')}}">
              <p class="slds-truncate slds-text-heading--label" title="{{data.fields[6].label}}">{{data.fields[6].label}}</p>
              <div class="slds-tile__detail slds-text-heading--small">
                  <p class="slds-truncate" title="{{obj | getter: data.fields[6]}}" style="color:{{getColorValueForLoseLives(obj)}}">{{obj |  getter: data.fields[6]}}</p>
              </div>
          </div>
        </div>
    </div>
    <div class="slds-col slds-col--padded slds-grid slds-wrap slds-grid--vertical-align-center slds-grid--align-spread">
        <div class="slds-col--padded slds-m-top--medium slds-p-bottom--medium" style="float:right;">
          <button class="slds-button" ng-click="performFlyout(uniqueLayoutId + '-card-'+cardIndex)">
            <slds-button-svg-icon sprite="'utility'" icon="'chevrondown'" no-hint="true" ng-if="!isSelected(cardIndex)"></slds-button-svg-icon><span ng-if="!isSelected(cardIndex)"> Show Commission Paid Products</span>
            <slds-button-svg-icon sprite="'utility'" icon="'chevronup'" no-hint="true" ng-if="isSelected(cardIndex)"></slds-button-svg-icon><span ng-if="isSelected(cardIndex)"> Hide Commission Paid Products</span>
          </button>
        </div>
        <span id="flyout" class="slds-p-around--small slds-size-1-of-1"></span>
    </div>
    
    <div class="embed-flyout slds-p-left--medium slds-p-right--medium"></div>
    <div class="slds-x-small-show-only slds-card__body via-slds-x-small-card__body slds-grid slds-grid--vertical slds-theme--default">
      <div class="slds-size--1-of-1 slds-x-small-show-only" ng-repeat="field in data.fields.slice(1, 6)" ng-show="key != 'attributes'">
        <div class="slds-grid via-slds-grid slds-p-around--small">
            <div class="slds-col slds-size--1-of-2">
                <p class="slds-text-align--left slds-truncate slds-text-heading--label" title="{{field.label}}">{{field.label}}</p>
            </div>
            <div class="slds-col slds-size--1-of-2" ng-if="!obj[field.relationshipName]">
                <p class="slds-text-align--right slds-truncate" >{{obj | getter: field | picker: field.type}}</p>
            </div>
            <div class="slds-col slds-size--1-of-2" ng-if="obj[field.relationshipName]">
                <p class="slds-text-align--right slds-truncate" >{{obj[field.relationshipName]['Name']}}</p>
            </div>
        </div>
      </div>
    </div>
    <div class="slds-card__footer slds-x-small-show-only">
      <button class="slds-button" ng-click="performFlyout('card-'+cardIndex)">
        <span ng-if="!isSelected(cardIndex)">View More</span>
        <span ng-if="isSelected(cardIndex)">View Less</span>
      </button>
    </div>
    </div>